<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <title>SuperCalc</title>
</head>

<style>
    .hidden{
    display: none;
};
</style>

<body>
    <nav class="nav-extended" id="nav">
        <div class="nav-wrapper indigo darken-1">
            <a class="brand-logo center">SuperCalc</a>
        </div>
        <div class="nav-content indigo darken-1">
            <ul class="tabs tabs-transparent row">
                <li class="tab col s4"><a class="active" onclick="mainON()" id="main-tab">Electricity</a></li>
                <li class="tab col s4"><a onclick="heatON()" id="heat-tab">Heating</a></li>
                <li class="tab col s4"><a onclick="waterON()" id="water-tab">Water</a></li>
            </ul>
        </div>
    </nav>
    <br>
    <div class="hidden" id="water-container">
        <div class="row col s12">
            <h4>Do you use shower?</h4>
            <div class="row">
                <select onchange="checkShowerA()" class="browser-default col s6" id="shower-answer-select">
                    <option value="yes">Yes</option>
                    <option value="no" selected>No</option>
                </select>

            </div>
        </div>
        <div class="hidden" id="shower-question">
            <h4>How often a week?</h4>
            <input type="text" id="shower-times" onkeypress="return isNumberKey(event)">Input here.</input>
        </div>
        <div class="row col s12">
            <h4>Do you have dishwasher?</h4>
            <div class="row">
                <select class="browser-default col s6" id="dishwasher-answer-select">
                    <option value="yes">Yes</option>
                    <option value="no" selected>No</option>
                </select>
            </div>
        </div>
        <div class="row col s12">
            <button class="waves-effect waves-light btn" id="button-3">Calculate</button>
        </div>
    </div>
    <div class="hidden" id="heating-container">
        <div class="row col s12">
            <h4>Where do you live?</h4>
            <div class="row">
                <select onchange="checkHomeT()" class="browser-default col s6" id="home-type-select">
                    <option value="flat" selected>Flat</option>
                    <option value="house">House</option>
                </select>

            </div>
        </div>
        <div id="house-q" class="hidden">
            <h4>What do you use for heating?</h4>
            <div class="row">
                <select class="browser-default col s6" id="heating-type-select">
                    <option value="firewood">Firewood</option>
                    <option value="heat-pellets">Heating pellets</option>
                </select>

            </div>
        </div>
        <div class="row col s12">
            <h4>Type of windows you have.</h4>
            <div class="row">
                <select class="browser-default col s6" id="window-type-select">
                    <option value="sp" selected>Single-pane</option>
                    <option value="dp">Double-pane</option>
                </select>

            </div>
        </div>
        <div class="row col s12">
            <h4>What surface area do your windows take?</h4>
            <input type="text" id="window-area" onkeypress="return isNumberKey(event)">Input value in mÂ².</input>
        </div>
        <div class="row col s12">
            <h4>How much money do you spend on heating per season?</h4>
            <input type="text" id="heat-money" onkeypress="return isNumberKey(event)">Input
            amount in euros.</input>
        </div>
        <div class="row col s12">
            <button class="waves-effect waves-light btn" id="button-2">Calculate</button>
        </div>
    </div>
    <div class="container row" id="main-container">
        <div class="col s6">
            <h4>Computer</h4>
            <div class="row">
                <div class="col s6">
                    <p>Check if you have this.</p>
                </div>
                <form action="#" class="col s6">
                    <p>
                        <label>
                            <input type="checkbox" class="filled-in" id="computer" />
                            <span></span>
                        </label>
                    </p>
                </form>
            </div>
        </div>
        <div class="col s6">
            <h4>Laptop</h4>
            <div class="row">
                <div class="col s6">
                    <p>Check if you have this.</p>
                </div>
                <form action="#" class="col s6">
                    <p>
                        <label>
                            <input type="checkbox" class="filled-in" id="laptop" />
                            <span></span>
                        </label>
                    </p>
                </form>
            </div>
        </div>
        <div class="col s6">
            <h4>Teapot</h4>
            <div class="row">
                <div class="col s6">
                    <p>Check if you have this.</p>
                </div>
                <form action="#" class="col s6">
                    <p>
                        <label>
                            <input type="checkbox" class="filled-in" id="teapot" />
                            <span></span>
                        </label>
                    </p>
                </form>
            </div>
        </div>
        <div class="col s6">
            <h4>Coffee Machine</h4>
            <div class="row">
                <div class="col s6">
                    <p>Check if you have this.</p>
                </div>
                <form action="#" class="col s6">
                    <p>
                        <label>
                            <input type="checkbox" class="filled-in" id="coffeeMachine" />
                            <span></span>
                        </label>
                    </p>
                </form>
            </div>
        </div>
        <div class="col s6">
            <h4>Toaster</h4>
            <div class="row">
                <div class="col s6">
                    <p>Check if you have this.</p>
                </div>
                <form action="#" class="col s6">
                    <p>
                        <label>
                            <input type="checkbox" class="filled-in" id="toaster" />
                            <span></span>
                        </label>
                    </p>
                </form>
            </div>
        </div>
        <div class="col s6">
            <h4>Audio system</h4>
            <div class="row">
                <div class="col s6">
                    <p>Check if you have this.</p>
                </div>
                <form action="#" class="col s6">
                    <p>
                        <label>
                            <input type="checkbox" class="filled-in" id="audio-system" />
                            <span></span>
                        </label>
                    </p>
                </form>
            </div>
        </div>
        <div class="col s6">
            <h4>Game console</h4>
            <div class="row">
                <div class="col s6">
                    <p>Check if you have this.</p>
                </div>
                <form action="#" class="col s6">
                    <p>
                        <label>
                            <input type="checkbox" class="filled-in" id="game-console" />
                            <span></span>
                        </label>
                    </p>
                </form>
            </div>
        </div>
        <div class="col s6">
            <h4>Air conditioner</h4>
            <div class="row">
                <div class="col s6">
                    <p>Check if you have this.</p>
                </div>
                <form action="#" class="col s6">
                    <p>
                        <label>
                            <input type="checkbox" class="filled-in" id="air-conditioner" />
                            <span></span>
                        </label>
                    </p>
                </form>
            </div>
        </div>
        <div class="col s6">
            <h4>Washing Machine</h4>
            <div class="row">
                <select class="browser-default col s6" id="washing-machine-select">
                    <option value="" disabled>Energy Efficiency</option>
                    <option value="a+++" selected>A+++</option>
                    <option value="a++">A++</option>
                    <option value="a+">A+</option>
                    <option value="b">B</option>
                    <option value="c">C</option>
                    <option value="d">D</option>
                </select>
                <form action="#" class="col s6">
                    <p>
                        <label>
                            <input type="checkbox" class="filled-in" id="washingMachine" />
                            <span></span>
                        </label>
                    </p>
                </form>
            </div>
        </div>
        <div class="col s6">
            <h4>Television</h4>
            <div class="row">
                <select class="browser-default col s6" id="television-select">
                    <option value="" disabled>Energy Efficiency</option>
                    <option value="a+++" selected>A+++</option>
                    <option value="a++">A++</option>
                    <option value="a+">A+</option>
                    <option value="b">B</option>
                    <option value="c">C</option>
                    <option value="d">D</option>
                </select>
                <form action="#" class="col s6">
                    <p>
                        <label>
                            <input type="checkbox" class="filled-in" id="television" />
                            <span></span>
                        </label>
                    </p>
                </form>
            </div>
        </div>
        <div class="col s6">
            <h4>Oven</h4>
            <div class="row">
                <select class="browser-default col s6" id="oven-select">
                    <option value="" disabled>Energy Efficiency</option>
                    <option value="a+++" selected>A+++</option>
                    <option value="a++">A++</option>
                    <option value="a+">A+</option>
                    <option value="b">B</option>
                    <option value="c">C</option>
                    <option value="d">D</option>
                </select>
                <form action="#" class="col s6">
                    <p>
                        <label>
                            <input type="checkbox" class="filled-in" id="oven" />
                            <span></span>
                        </label>
                    </p>
                </form>
            </div>
        </div>
        <div class="col s6">
            <h4>Dishwasher</h4>
            <div class="row">
                <select class="browser-default col s6" id="dishwasher-select">
                    <option value="" disabled>Energy Efficiency</option>
                    <option value="a+++" selected>A+++</option>
                    <option value="a++">A++</option>
                    <option value="a+">A+</option>
                    <option value="b">B</option>
                    <option value="c">C</option>
                    <option value="d">D</option>
                </select>
                <form action="#" class="col s6">
                    <p>
                        <label>
                            <input type="checkbox" class="filled-in" id="dishwasher" />
                            <span></span>
                        </label>
                    </p>
                </form>
            </div>
        </div>
        <button class="waves-effect waves-light btn" id="button">Calculate</button>
    </div>
</body>
<script>
    const electron = require('electron');
    const { ipcRenderer } = electron;

    function id(id) {
        return document.getElementById(id)
    };

    var mainCont = id('main-container');
    var heatCont = id('heating-container');
    var waterCont = id('water-container');
    var mainTab = id('main-tab');
    var heatTab = id('heat-tab');
    var waterTab = id('water-tab');
    var homeT = id('home-type-select');
    var houseQ = id('house-q');
    var showerA = id('shower-answer-select');
    var showerQ = id('shower-question');

    function waterON() {
        mainTab.className = '';
        heatTab.className = '';
        waterTab.className = 'active';
        heatCont.className = 'hidden';
        mainCont.className = 'hidden';
        waterCont.className = 'container row';
    }

    function heatON() {
        heatTab.className = 'active';
        waterTab.className = '';
        mainTab.className = '';
        heatCont.className = 'container row';
        mainCont.className = 'hidden';
        waterCont.className = 'hidden';
    };
    function mainON() {
        mainTab.className = 'active';
        heatTab.className = '';
        waterTab.className = '';
        heatCont.className = 'hidden';
        mainCont.className = 'container row';
        waterCont.className = 'hidden';
    };

    function checkHomeT() {
        if (homeT.value == 'house') {
            houseQ.className = 'row col s12';
        }
        else if (homeT.value == 'flat') {
            houseQ.className = 'hidden';
        }
    };

    function checkShowerA() {
        if (showerA.value == 'yes') {
            showerQ.className = 'row col s12';
        }
        else if (showerA.value == 'no') {
            showerQ.className = 'hidden'
        }
    };

    function isNumberKey(evt) {
        var charCode = (evt.which) ? evt.which : event.keyCode
        if (charCode != 46 && charCode > 31
            && (charCode < 48 || charCode > 57))
            return false;

        return true;
    };

    var pc = id('computer'),
        ltop = id('laptop'),
        tpot = id('teapot'),
        coffeeM = id('coffeeMachine'),
        tstr = id('toaster'),
        aSys = id('audio-system'),
        gCons = id('game-console'),
        aCond = id('air-conditioner'),
        washingM = id('washingMachine'),
        tv = id('television'),
        dishW = id('dishwasher'),
        ovn = id('oven');
    var btn = id('button');
    var btn2 = id('button-2');
    var btn3 = id('button-3');

    var heatingT = id('heating-type-select'),
        windowT = id('window-type-select'),
        heatM = id('heat-money'),
        windowA = id('window-area');

    var showerT = id('shower-times'),
        dishWA = id('dishwasher-answer-select');

    btn3.addEventListener('click', sendResultsW);
    btn2.addEventListener('click', sendResultsH);
    btn.addEventListener('click', sendResultsE);

    function sendResultsE(e) {
        let elemsSome = [pc, ltop, tpot, coffeeM, tstr, aSys, gCons, aCond, washingM, tv, ovn, dishW].some(function (item) {
            return item.checked;
        });
        e.preventDefault();
        if (!elemsSome) {
            alert('Please check at least one option.');
            return;
        }
        ipcRenderer.send('button:clicked', JSON.stringify({
            pc: pc.checked,
            ltop: ltop.checked,
            tpot: tpot.checked,
            coffeeM: coffeeM.checked,
            tstr: tstr.checked,
            aSys: aSys.checked,
            gCons: gCons.checked,
            aCond: aCond.checked,
            washingM: washingM.checked ? id('washing-machine-select').value : false,
            tv: tv.checked ? id('television-select').value : false,
            ovn: ovn.checked ? id('oven-select').value : false,
            dishW: dishW.checked ? id('dishwasher-select').value : false,
        }));
    };

    function sendResultsH(e) {
        e.preventDefault();
        ipcRenderer.send('button2:clicked', JSON.stringify({
            homeT: homeT.value,
            heatingT: houseQ.className == 'hidden' ? false : heatingT.value,
            windowT: windowT.value,
            windowA: windowA.value == '' ? false : windowA.value,
            heatM: heatM.value == '' ? false : heatM.value,

        }));
    };

    function sendResultsW(e) {
        e.preventDefault();
        ipcRenderer.send('button3:clicked', JSON.stringify({
            showerA: showerA.value,
            showerT: showerQ.className == 'row col s12' ? showerT.value : false,
            dishWA: dishWA.value,
        }));
    };

    ipcRenderer.on('rWindow:opened', function () {
        btn.disabled = true;
        btn2.disabled = true;
        btn3.disabled = true;
    });
    ipcRenderer.on('rWindow:closed', function () {
        btn.disabled = false;
        btn2.disabled = false;
        btn3.disabled = false;
    });
</script>

</html>